
##### EDIT is the tag for stuff that still needs to be done!


---
title: "Subsetting HDF5 files to make a smaller deliverable"
description: "Take a large HDF5 file and extract only the information that you need, then save as a new HDF5 file. For an example, we will take an existing hyperspectral dataset (~600Mb) and reduce it in size for subsequent tutorials."
dateCreated: 2020-02-04 14:20:52
authors: Donal O'Leary
contributors: 
estimatedTime: 1.0 Hours
packagesLibraries: rhdf5, raster
topics: hyperspectral, HDF5, remote-sensing
languagesTool: R
dataProudct: ##### EDIT
code1: ##### EDIT
tutorialSeries: ##### EDIT 
urlTitle: ##### EDIT
---

In this tutorial, we will subset and existing HDF5 file containing NEON
hyperspectral data. The purpose of this exercise is to generate a smaller
file for use in subsequent tuorials.

<div id="ds-objectives" markdown="1">

## Learning Objectives

After completing this activity, you will be able to:

* Navigate an HDF5 file to identify the variables of interest.</li>
* Generate a new HDF5 file from a subset of the existing dataset.</li>
* Save the new HDF5 file for future use.

## Things Youâ€™ll Need To Complete This Tutorial
To complete this tutorial you will need the most current version of R and, 
preferably, RStudio loaded on your computer.

### R Libraries to Install:

* **rhdf5**: `install.packages("BiocManager")`, `BiocManager::install("rhdf5")`
* **raster**: `install.packages('raster')`

<a href="{{ site.baseurl }}/packages-in-r" target="_blank"> More on Packages in
 R - Adapted from Software Carpentry.</a>

### Data to Download

{% include/dataSubsets/_data_Met-Time-Series.html %} ##### EDIT should be full 1km hyperspectral HDF5

***
{% include/_greyBox-wd-rscript.html %}  ##### EDIT
***

### Recommended Skills

##### EDIT this should be changed, as this tutorial will take place /before/ the hyperspectral lessons!

We highly recommend you work through the 
<a href="{{ site.baseurl }}/hsi-hdf5-r" target="_blank"> *Introduction to Working with Hyperspectral Data in HDF5 Format in R* tutorial</a>
before moving on to this tutorial.

</div>


## About Hyperspectral Data 
PARAGRAPH 1



```{r load-libraries}

# Install rhdf5 package (only need to run if not already installed)
#install.packages("BiocManager")
#BiocManager::install("rhdf5")

# Load required packages
#library(raster)
library(rhdf5)
#library(rgdal)
#library(maps)

# set working directory to ensure R can find the file we wish to import and where
# we want to save our files. Be sure to move the download into your working directory!
wd="~/Desktop/Hyperspectral_Tutorial/" #This will depend on your local environment
setwd(wd)

```



```{r read-in-file }

# Read in H5 file
#f <- paste0(wd,"NEONDSImagingSpectrometerData.h5")
f <- paste0(wd,"NEON_D17_SJER_DP3_257000_4112000_reflectance.h5")
#View HDF5 file structure 
h5ls(f,all=T)

```



```{r create-hdf5}

# create hdf5 file
h5createFile("sensorData.h5")
# create group for location 1
h5createGroup("sensorData.h5", "location1")

```
