---
syncID:
title: "NEON MDP Data - Download and Explore"
description: 
dateCreated: 2025-08-20
authors: Cove Sturtevant, Claire Lunch, David Durden, Chris Florian
contributors: 
estimatedTime: 
packagesLibraries: 
topics: 
languagesTool: 
dataProduct: 
code1: 
tutorialSeries: 
urlTitle: 
---

This tutorial provides an introduction to working with NEON Mobile Deployment 
Platform (MDP) data, using the `neonMDP` and `neonUtilities` R packages. If you are new to NEON data, we also recommend more general tutorials, such as the 
<a href="https://www.neonscience.org/neonDataStackR" target="_blank">neonUtilities tutorial</a>
or the <a href="https://www.neonscience.org/download-explore-neon-data" target="_blank">Download and Explore tutorial</a>. 

A key difference between public NEON data and MDP data is that MDP data are
not retrieved from the NEON Data Portal. Rather, data are accessed directly from 
a Google Cloud Storage bucket with a more complex directory structure than data
packages downloaded from the Portal. This tutorial will show a user how to 
download the data from the bucket to a local data store and load it into the R 
computing environment for exploration, proving entry points to other NEON 
tutoraials which initially rely on data retrieval from the Portal. This tutorial
will end with instructions to write the data loaded into the R environment to 
.csv format should the user desire to work with the data in another application 
in a more traditional format.

<div id="ds-objectives" markdown="1">

## Learning Objectives 
After completing this tutorial you will be able to: 

* Download, compile, and export MDP data 

## Things You’ll Need To Complete This Tutorial

### R Programming Language
You will need a current version of R to complete this tutorial. We also recommend 
the RStudio IDE to work with R. 

### R Packages to Install
Prior to starting the tutorial ensure that the following packages are installed.

* **neonMDP:** `devtools::install_github('NEONScience/NEON-mobile-deployment/neonMDP')`
* **neonUtilities (for now):** `devtools::install_github('NEONScience/NEON-utilities/neonUtilities')`
* **neonUtilities (when updated in cran):** `install.packages("neonUtilities")`
* **googleCloudStorageR:** `install.packages("googleCloudStorageR")`


Load the packages.
```{r package-load}

library(neonUtilities)
library(neonMDP)
library(googleCloudStorageR)

```

<a href="/packages-in-r" target="_blank"> More on Packages in R </a>– Adapted from Software Carpentry.


### Working Directory
This lesson will download MDP data to your working directory.

<a href="https://www.neonscience.org/set-working-directory-r" target="_blank"> An overview
of setting the working directory in R can be found here.</a>


## Download Instrument Data from Google Cloud Storage Bucket

First, we will download all Instrument System (IS) data from the GCS bucket. 
IS data includes all automated sensors except for the Surface-Atmosphere 
Exchange data, which will be downloaded in a separate section below.

Change the bucket in the code below to the bucket set up for your MDP data, 
then run this section once to download all existing IS data from the bucket.
Note that the code will error if data have already been downloaded. 
To retrieve new data each month, see "get new data" section below.

```{r download-is-data}

setGcsEnv(bucket='neon-rss-md04')
downloadMDP('Publication')

```

## Stack IS Data 

NEON data are provided in product-site-month increments. 
The following code will stack (compile) the full timeseries of IS products. 
MORE DESCRIPTION.
Examples for three products are provided below. You can see which products are
available by looking in the "Publication" folder of the working directory.

If there are data from more than one site in the working directory, change 
the `site=` parameter in the code snippets below from "all" to the 4-character 
MDP site code (e.g. "MD04") that you want to explore. 

```{r stack-is-data}

# Relative Humidity
rh <- stackFromStore(dpID='DP1.00098.001', filepaths=getwd(), site='all',
                     startdate=NA, enddate=NA, package='basic')

# Water Quality
wq <- stackFromStore(dpID='DP1.20288.001', filepaths=getwd(), site='all',
                     startdate=NA, enddate=NA, package='expanded')

# Photosynthetically-active Radiation (Quantum Line)
ql <- stackFromStore(dpID='DP1.00066.001', filepaths=getwd(), site='all',
                     startdate=NA, enddate=NA, package='expanded')

```

## Download Surface-Atmosphere Exchange Data from Google Cloud Storage Bucket

Now we will download all Surface-Atmosphere Exchange (SAE) data from the GCS bucket. 

Change the bucket in the code below to the bucket set up for your MDP data, 
then run this section once to download all existing SAE data from the bucket.
Note that the code will error if data have already been downloaded. 
To retrieve new data each month, see "get new data" section below.

```{r download-sae-data}

setGcsEnv(bucket='neon-rss-md04')
downloadMDP('ods/dataproducts/DP4')

```

## Stack SAE Data 

The following code will stack (compile) SAE products. MORE DESCRIPTION.

If there are data from more than one site in the working directory, change 
the `site=` parameter in the code snippets below from "all" to the 4-character 
MDP site code (e.g. "MD04") that you want to explore. 


```{r stack-sae-data}

# NSAE data
flux <- stackFromStore(dpID='DP4.00200.001', filepaths=paste(getwd(), 'ods', sep='/'), 
                       site='all', startdate=NA, enddate=NA, package='basic', level='dp04')

# isotope data
iso <- stackFromStore(dpID='DP4.00200.001', filepaths=paste(getwd(), 'ods', sep='/'), site='all',
                      startdate=NA, enddate=NA, package='basic', 
                      level='dp01', timeIndex=30, var='dlta13CCo2')

```

## Get New Data

To retrieve new data published to the bucket each month, change the bucket in 
the code below to the bucket set up for your MDP data, then run this section.


```{r download-new-data}

setGcsEnv(bucket='neon-rss-md04')
updateMDP('Publication')
updateMDP('ods/dataproducts/DP4')

```

## Explore Data by Accessing other NEON Tutorials 


## Save Data in .csv Format 


## Additional Resources
You can list any additional resources you'd like to link to if needed. 

* <a href="URL Here" target="_blank"> Resource Name/a>,
 
</div>

Once all the information in the Info Box is complete, then the tutorial really 
begins. H2 headers are used for page navigation on the website and should be used
to denote important sections. H3 & H4 headers can be used for sub headers. 


## Additional information about the YAML Header

This header must be at the top of each tutorial so that all associated metadata 
will appear correctly. (Spaces at beginning of each line only added so as not to render if this document is knit)

    ---
    syncID: sync-id-from-list - this will be added by NEON staff, you do not need to include
    title: "Descriptive Title In Title Case"
    description: "Descriptive text about the tutorial here. Must be all on one line no matter how long."
    dateCreated: 2015-08-01
    authors: Megan A. Jones, Each Author Separated by Commas, 
    contributors: Jane Doe, Also Seperate, By Commas
    estimatedTime: 1.5 hrs
    packagesLibraries: raster, rhdf5, rgdal
    *see list in processing_code/_data/packagesLibraries.yml for the correct list. If you would like to add a term please include in your PR message. 
    topics: data-analysis, data-visualization, HDF5, spatial-data-gis 
    *see list in processing_code/_data/tags.yml for the correct list. If you would like to add a term please include in your PR message. 
    languagesTool: R, python
    *see list in processing_code/_data/languagesTool.yml for the correct list. If you would like to add a term please include in your PR message. 
    dataProduct: DP1.0001.01
    *all NEON data products used in the tutorial written in the above format. (no .yml for this list). 
    code1: a URL to where the code for this tutorial is located on GitHub. Don't worry about this field, a NEON Data Skills team member will populate this for you as a part of the publishing process
    tutorialSeries: 
    *if the tutorial is part of a series, this metadata isn't used by the Drupal site but is useful for tutorial management
    urlTitle: styles-css 
    *a short url that is descriptive but not long. This will become the 'slug' for the tutorial web page
    ---

## Styling 

Our tutorials are styled with Markdown with a few exceptions (see links). 
For a simple markdown overview, check out 
<a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet" target="_blank">this cheatsheet</a>.

We also use specific styling to improve accessibility of our materials and to match 
NEONScience.org CSS. Please refer to the 
<a href="https://github.com/NEONScience/NEON-Data-Skills/blob/master/tutorials/NDS-style-guide.md" target="_blank">NEON Data Skills Style Guide</a>. 
In particular, please not that we html with target="_blank" for all links. We 
do not use Markdown formatting for any links. 

## Submission & Review 
When you are ready for review of your tutorial, complete a Pull Request to the 
NEONScience/NEON-Data-Skills repository. If you have questions on using a forking workflow in GitHub, please see there series: 
<a href="https://www.neonscience.org/version-control-git-series" target="_blank"> More on Packages in R </a>– 


